@using Microsoft.AspNetCore.Builder
@using Microsoft.AspNetCore.Localization
@using Microsoft.AspNetCore.Http.Features
@using Microsoft.Extensions.Options
@using Microsoft.AspNetCore.Mvc.Localization
@using Microsoft.Extensions.Localization

@inject IStringLocalizer<SharedResource> sharedResource
@inject IViewLocalizer Localizer
@inject IOptions<RequestLocalizationOptions> LocOptions
@*

*@
@*@{
    var requestCulture = Context.Features.Get<IRequestCultureFeature>();
    //get all cultures name from startup
    var cultureItems = LocOptions.Value.SupportedUICultures
    .Select(c => new SelectListItem { Value = c.Name, Text = c.DisplayName })
    .ToList();
    }*@

@{
    var requestCultureFeature = Context.Features.Get<IRequestCultureFeature>();
    var requestCulture = requestCultureFeature.RequestCulture;
    var dir = requestCulture.Culture.Name == "ar" ? "rtl" : "ltr";

    if (requestCulture.Culture.Name.StartsWith("ar"))
    {

    //    <style>
    //    .header-navigation .container .logo-box
    //    {
    //        float: right;
    //        right: 15px;
    //    }
    //    .header-navigation .main-navigation 
    //    {
    //        float: left;
    //    }
    //    //    .body {
    //    //        line-height: 0px;
    //    //    }

    //    //    .invers {
    //    //        direction: ltr !important;
    //    //        text-align: left !important;
    //    //    }

    //    //    .menu-title {
    //    //        padding-right: 0.5rem;
    //    //    }

    //    //    .circle {
    //    //        margin-right: 8.5rem;
    //    //        padding: 0.3rem;
    //    //    }

    //        .dropdown-toggle::after {
    //            display: none;
    //        }

    //    //    .site-header.header-one .header-navigation ul.navigation-box > li {
    //    //        padding-left: 1rem;
    //    //    }

    //    //        .site-header.header-one .header-navigation ul.navigation-box > li + li {
    //    //            margin-left: 0px;
    //    //        }

    //        //.navbar-expand-lg .navbar-nav .nav-link {
    //        //    padding-right: 2.5rem;
    //        //    padding-left: 1.7rem;
    //        //}

    //        #MessiImage {
    //            padding-right: 26rem;
    //        }

    //    //    #LoginBtn {
    //    //        width: 20rem;
    //    //    }

    //        .header-navigation ul.navigation-box > li > a {
    //            padding: 1rem;
    //        }

    //    //    .dropdown-item {
    //    //        padding: 0rem 3rem;
    //    //    }

    //        .custom-file-label {
    //            width: 37rem;
    //            padding-right: 6rem;
    //            margin-right: 1rem;
    //        }

    //    //    // .LabelsFile {
    //    //        // width: 37rem;
    //    //        // padding-right: 6rem;
    //    //        // margin-right: 1rem;
    //    //        //
    //    //    }

    //    //    //body {
    //    //        // font-size: 16px;
    //    //        // line-height: 17px;
    //    //        //
    //    //    }


    //      .text-left {
    //           text-align: right !important;
    //        }
    //   </style>
    //    <link rel="stylesheet" href="" id="stylear">
    //    <link rel="preconnect" href="https://fonts.googleapis.com" id="googleid">
    //    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin id="fontid">
    //    <link href="https://fonts.googleapis.com/css2?family=Cairo&display=swap" rel="stylesheet" id="fontgoogleid">


    //}
    //else
    //{
    //    <link rel="stylesheet" href="" id="stylear">
    //    <link rel="preconnect" href="https://fonts.googleapis.com" id="googleid">
    //    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin id="fontid">
    //    <link href="https://fonts.googleapis.com/css2?family=Cairo&display=swap" rel="stylesheet" id="fontgoogleid">

    //    <style>

    //    //    .container {
    //    //        padding-left: 8rem;
    //    //        margin-right: auto;
    //    //        margin-left: 0px;
    //    //    }

    //    //    .invers {
    //    //        direction: rtl !important;
    //    //        text-align: right !important;
    //    //    }

    //       .dropdown-toggle::after {
    //            display: none;
    //        }

    //    //    .navbar-expand-lg .navbar-nav .nav-link {
    //    //        padding-right: 2.5rem;
    //    //        padding-left: 1.7rem;
    //    //    }

    //    //    .navbar-expand-lg .navbar-nav .nav-link {
    //    //        padding-right: 2.5rem;
    //    //        padding-left: 1.7rem;
    //    //    }

    //    //    #LoginBtn {
    //    //        width: 9rem;
    //    //    }

    //    //    .dropdown-item {
    //    //        padding: 0rem 3rem;
    //    //    }

    //    //    //body {
    //    //        // font-size: 16px;
    //    //        // line-height: 17px;
    //    //        //
    //    //    }


    //        .text-left {
    //           text-align: left !important;
    //       }

    //    //    .body {
    //    //        line-height: 0px;
    //    //    }

    //    </style>

    }
}


@*<div style="margin-left:10px; margin-right:10px" title="@Localizer["Request culture provider:"] @requestCultureForm?.Provider?.GetType().Name">
    <form id="selectLanguage" asp-controller="Localization" asp-action="SetLang" asp-route-url="@Context.Request.Path" method="post" class="form-horizontal" role="form">
    <select class="form-control select2" name="culture" onclick="ChangeLang('lang')" asp-for="@requestCultureForm.RequestCulture.UICulture.Name" asp-items="cultureItems">
    </select>
    </form>
    </div>*@
@*    ///////////////////////////////////
    <a href="#" class="link-underline link-underline-1" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    @{
    var local = Context.Request.HttpContext.Features.Get<IRequestCultureFeature>();
    var BrowserCultur = local.RequestCulture.UICulture.ToString();
    //English
    if (BrowserCultur == "en-US")
    {
    <span>@sharedResource["Language"] </span> <img asp-coto class="ms-2" src="/Admin/assets/images/flags/us_flag.jpg" alt="Header Language" height="16">
    }
    else
    {
    <span>@sharedResource["Language"] </span> <img asp-coto class="ms-2" src="/Admin/assets/images/flags/language-6.png" alt="Header Language" height="16">
    }
    }
    </a>
    <div class="dropdown-menu dropdown-menu-end">


    <a asp-controller="Setting" asp-action="ChangeLanguage" style="color:black" asp-route-culture="en-US" asp-route-url="@Context.Request.Path@Context.Request.QueryString.ToString()" class="dropdown-item notify-item" onclick="ChangeLang('en')">
    <img src="/Admin/assets/images/flags/us_flag.jpg" alt="user-image" height="12"> <span class="align-middle">@sharedResource["English Language"] </span>
    </a>
    <a  asp-controller="Setting" asp-action="ChangeLanguage" asp-route-culture="ar-EG" style="color:black" asp-route-url="@Context.Request.Path@Context.Request.QueryString.ToString()" class="dropdown-item notify-item" onclick="ChangeLang('ar')">
    <img width="18" height="18" src="/Admin/assets/images/flags/language-6.png" alt="user-image"> <span class="align-middle"> @sharedResource["Arabic Language"]  </span>
    </a>
    </div>*@


<div class="dropdown language-switcher d-inline-block" style="margin-left:10px;height: 6.50rem; margin-right:10px">
    <ul class="navbar-nav">
        <li class="nav-item nav-profile dropdown position-relative">
            <a class="nav-link dropdown-toggle" style="cursor:pointer"
               data-toggle="dropdown" id="LanguageDropDown">
                @{


                    var locale = Context.Request.HttpContext.Features.Get<IRequestCultureFeature>();
                    var BrowserCulture = locale.RequestCulture.UICulture.ToString();

                    if (BrowserCulture == "en-US")
                    {
                        <span style="color:#777B92;">@sharedResource["English Language"] </span> <img asp-coto class="ms-2" src="/Admin/assets/images/flags/us_flag.jpg" alt="Header Language" height="16">
                    }
                    else
                    {
                        <span style="color:#777B92;">@sharedResource["Arabic Language"] </span> <img asp-coto class="ms-2" src="/Admin/assets/images/flags/language-6.png" alt="Header Language" height="16">
                    }
                }


            </a>


            <div class="profile_menu rounded border d-none" style="background-color:white;height: 3.5rem;" aria-labelledby="LanguageDropDown">
                <a asp-controller="Setting" asp-action="ChangeLanguage" style="color:black;height: 50%;font-size: 11px" asp-route-culture="en-US" asp-route-url="@Context.Request.Path@Context.Request.QueryString.ToString()" class="dropdown-item " onclick="ChangeLang('en')" id="ang1">
                    <img src="/Admin/assets/images/flags/us_flag.jpg" alt="user-image" height="10"> <span class="align-middle"><b>@sharedResource["English Language"]</b> </span>
                </a>
                <a class="dropdown-item " onclick="ChangeLang('ar')" id="ang2" asp-controller="Setting" asp-action="ChangeLanguage" asp-route-culture="ar-EG" style="color:black;height: 44%; font-size: 11px" asp-route-url="@Context.Request.Path@Context.Request.QueryString.ToString()">
                    <img width="18" height="10" src="/Admin/assets/images/flags/language-6.png" alt="user-image"> <span class="align-middle"><b>@sharedResource["Arabic Language"]</b>   </span>

                </a>
            </div>
        </li>
    </ul>
</div>
<script>
    function ChangeLang(lang) {
        document.getElementById("hello");
        var anch1 = document.getElementById("ang1");
        var anch2 = document.getElementById("ang2");
        var masterPage = document.getElementById("masterPageId");
        if (lang == "en") {
            localStorage.setItem("lang", "en");

        }
        if (lang == "ar") {

            localStorage.setItem("lang", "ar");

        }

    }
    window.addEventListener('DOMContentLoaded', (event) => {
        var masterPage = document.getElementById("masterPageId");
        if (localStorage.getItem("lang") != "") {
            if (localStorage.getItem("lang") == "en") {
                masterPage.dir = "ltr";

                document.getElementById("masterbodyid").style.textAlign = "left"

            }
            else if (localStorage.getItem("lang") == "ar") {


                masterPage.dir = "rtl"

                console.log(document.getElementById("masterbodyid"))
                document.getElementById("masterbodyid").style.textAlign = "right"





            }
        }
    });

    var LanguageDropdown = document.getElementById("LanguageDropDown");
    var profile = document.getElementsByClassName("profile_menu")[0];

    LanguageDropDown.addEventListener("click", () => {
        profile.classList.toggle("d-none");
    });
</script>
